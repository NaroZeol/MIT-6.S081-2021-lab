# Lab: Xv6 and Unix utilities

## Boot xv6

启动xv6。整个lab的环境还是是很好配置的，直接执行课程网站的命令一键配置。

## sleep

sleep是已经实现了的syscall，只要像正常编写C语言程序一样调用即可。

## pingpong

还是考察对Unix api的熟悉程度。要注意pipe创造的管道是左读右写的，并不是双向都可读写的。

## primes

使用管道实现一个质数筛。

最开始的时候读题一直没理解要做什么，知道看到提示里的[网站](https://swtch.com/~rsc/thread/)的图才明白。

要注意关闭不需要的管道（子进程只需要读口，父进程只需要写口）来节省文件描述符。

最后写出来的有点乱，最开始的时候没有想到用wait来等到子进程来防止父进程提前结束导致的乱码，直接用sleep(10)来强制等待。😂

## find

这个题目是要求实现一个find命令，可以递归地查找文件。

照着抄`ls.c`是怎么处理目录读写的就行了。

注意路径名和文件名的区别，在实现的时候要将文件名从路径名中提取出来。

## xargs

考察对管道以及exec的使用，主要复杂的地方在于参数字符串的处理上。

实现时要注意exec对argv数组的要求，不要忘记argv[0]是命令名。

## 总结

这个lab主要目的是熟悉xv6的使用以及如何使用xv6提供的系统调用编写xv6程序。

如果对Unix api比较熟悉的话这个lab的难度不算大。